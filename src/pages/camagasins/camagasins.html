<!--
  Generated template for the Camagasins page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-toolbar>


        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>

        <ion-title>Chiffres Magasins</ion-title>
        <ion-buttons end>
            <button ion-button icon-only (click)="showCA()" *ngIf="(enseigne!=null)  || (enseigne!=undefined)">
            <ion-icon name="refresh"></ion-icon>
        </button>
        </ion-buttons>

    </ion-toolbar>

</ion-header>


<ion-content>
    <!--<ion-list>-->

    <ion-item>
        <ion-label>La Date</ion-label>
        <ion-datetime displayFormat="DD/MM/YYYY" doneText="Valider" cancelText="Annuler" [(ngModel)]="selDate" (ionChange)="doChangeDate($event)"></ion-datetime>
    </ion-item>
    <ion-item>
        <ion-icon name="home" item-left></ion-icon>
        <ion-label>Enseigne</ion-label>
        <ion-select [selectOptions]="selOptions" okText="Valider" cancelText="Annuler" [(ngModel)]="enseigne" (ionChange)="doSelect($event)">
            <ion-option value="GEANT">GEANT</ion-option>
            <ion-option value="CASINO">CASINO</ion-option>
            <ion-option value="ECOMAX">ECOMAX</ion-option>
            <ion-option value="ECOMAX MQ">ECOMAX MARTINIQUE</ion-option>
            <ion-option value="ECOMAX GP">ECOMAX GUADELOUPE</ion-option>
            <ion-option value="ECOMAX CY">ECOMAX GUYANE</ion-option>
        </ion-select>
    </ion-item>


    <!--</ion-list>-->
    <ion-list>
        <ion-item *ngIf="(nbmag > 1) && (enseigne!='GEANT')">
            <h2>
                <font size="5">Total = </font>
                <font size="6" class="danger"><b>{{totalca.toFixed(2)}} €</b></font>
            </h2>
        </ion-item>
        <ion-item-sliding *ngFor="let mag of magasins">
            <ion-item>
                <!-- (click)="magSelected(mag)" -->
                <h2>
                    <font size="4"><b primary>{{mag.nommag}}</b></font>
                </h2>
                <h1><b>{{mag.camag}} €</b></h1>
                <p><b>Nb Client = {{mag.climag}}</b></p>
                <p><b>Pan. moy. = {{(mag.camag / mag.climag).toFixed(2)}} €</b></p>
            </ion-item>
            <ion-item-options>
                <button ion-button item-end>test</button>
            </ion-item-options>
        </ion-item-sliding>
        <!--(click)="camagSelected(mag.ipmag)"-->



        <ion-item *ngIf="(nbmag > 1) && (enseigne=='GEANT')">
            <h2>
                <font size="5">Total = </font>
                <font size="6" class="danger"><b>{{totalca.toFixed(2)}} €</b></font>
            </h2>
        </ion-item>

    </ion-list>

</ion-content>